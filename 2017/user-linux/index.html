<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content=noodp><link rel=prev href=https://mfachrulrazy.github.io/2016/del-notif-chrome/><link rel=next href=https://mfachrulrazy.github.io/2017/firewall-cmd/><link rel=canonical href=https://mfachrulrazy.github.io/2017/user-linux/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>Mengelola User pada Linux | MFR Official Blog</title><meta name=title content="Mengelola User pada Linux | MFR Official Blog"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><meta name=twitter:card content=summary><meta name=twitter:title content="Mengelola User pada Linux"><meta name=twitter:description content="Mengelola user secara baik pada Linux akan membantu system administrator dalam melakukan audit dan membuat linux tersebut lebih aman. Beberapa hal yang perlu diperhatikan dalam mengelola user yaitu:
 Membuat sudo user
 Disable user root
 Policy dan Privilege User
 Menghapus user dan group
  Membuat sudo user Mendaftarkan group super user ke user yang telah ada $ sudo usermod -a -G wheel userA Membuat user baru sekaligus menambahkan ke group super user $ sudo useradd -G wheel userB Super user group untuk redhat-based adalah wheel dan untuk debian-based adalah sudo"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Mengelola User pada Linux","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/mfachrulrazy.github.io\/2017\/user-linux\/"},"image":{"@type":"ImageObject","url":"https:\/\/mfachrulrazy.github.io\/cover.png","width":800,"height":600},"genre":"posts","keywords":"linux, server","wordcount":965,"url":"https:\/\/mfachrulrazy.github.io\/2017\/user-linux\/","datePublished":"2017-01-23T00:00:00\x2b00:00","dateModified":"2017-01-23T00:00:00\x2b00:00","publisher":{"@type":"Organization","name":"MFR","logo":{"@type":"ImageObject","url":"https:\/\/mfachrulrazy.github.io\/logo.png","width":127,"height":40}},"author":{"@type":"Person","name":"MFR"},"description":""}</script></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=https://mfachrulrazy.github.io/>MFR Official Blog</a></div><div class="menu navbar-right"><a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about>About</a>
<a class=menu-item href=/ref>References</a>
<a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dribbble"></i></a>&nbsp;</div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dribbble"></i></a>&nbsp;<a href=https://mfachrulrazy.github.io/>MFR Official Blog</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about>About</a>
<a class=menu-item href=/ref>References</a></div></div></nav><main class=main><div class=container><article class=post-warp><header class=post-header><h1 class=post-title>Mengelola User pada Linux</h1><div class=post-meta>Written by <a href=https://mfachrulrazy.github.io/ rel=author>MFR</a> with ♥
<span class=post-time>on <time datetime=2017-01-23>23 January 2017</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=https://mfachrulrazy.github.io/categories/linux/>linux</a>
<a href=https://mfachrulrazy.github.io/categories/server/>server</a></span>
<i class="iconfont icon-timer"></i>5 min</div></header><div class=post-content><p>Mengelola user secara baik pada Linux akan membantu system administrator dalam melakukan audit dan membuat linux tersebut lebih aman. Beberapa hal yang perlu diperhatikan dalam mengelola user yaitu:</p><ul><li>Membuat sudo user<br></li><li>Disable user root<br></li><li>Policy dan Privilege User<br></li><li>Menghapus user dan group<br></li></ul><h3 id=membuat-sudo-user>Membuat sudo user</h3><p>Mendaftarkan group <strong>super user</strong> ke user yang telah ada<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo usermod -a -G wheel userA</code></pre></div>Membuat user baru sekaligus menambahkan ke group super user<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo useradd -G wheel userB</code></pre></div>Super user group untuk <strong>redhat-based</strong> adalah <code>wheel</code> dan untuk <strong>debian-based</strong> adalah <code>sudo</code></p><h3 id=disable-user-root>Disable User root</h3><p>Biasanya ketika mengaktifkan vps pada cloud, kita diberikan user root dan sebaiknya user root ini segera di-disable. Caranya:</p><ul><li>Buat sudo user terlebih dahulu dengan user root<br></li><li>Logout dari user root dan masuk ke sudo user yang baru dibuat<br></li><li>Dalam sudo user disable user root<br></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo passwd -l root</code></pre></div><h3 id=sudo-policy-file>Sudo Policy File</h3><p>Policy file adalah file yang mengatur kebijakan dalam sudo user. Jika kita menggunakan banyak server dan ingin menambahkan beberapa user untuk dijadikan super user, bisa dengan cara mengedit policy file di <code>/etc/sudoers</code><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo visudo</code></pre></div>Dalam file policy, hilangkan komentar baris berikut<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># User_Alias ADMINS = userA, userB</span></code></pre></div>Masukkan nama user yang akan didaftarkan sebagai super user. Berikan user alias di atas dengan full sudo power dengan menambahkan baris berikut<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ADMINS ALL<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span> ALL</code></pre></div>Jika hanya spesifik terhadap satu user bisa dengan menambah baris berikut<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>userA ALL<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span> ALL</code></pre></div>Mengedit file <code>/etc/sudoers</code> dengan text editor tidak akan berfungsi, oleh karena itu cara yang terbaik adalah dengan <code>sudo visudo</code></p><h3 id=privilege-khusus-pada-sudo-user>Privilege Khusus pada Sudo User</h3><p>Terkadang ketika membuat user kita hanya ingin user tersebut melakukan pekerjaan-pekerjaan khusus. Sebagai contoh di sini userA dan userB hanya dapat melakukan update dan install paket.<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>User_Alias SOFTWAREADMINS <span style=color:#f92672>=</span> userA, userB</code></pre></div>Kemudian hilangkan komentar pada <code>command alias</code> untuk <code>SOFTWARE</code><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Cmnd_Alias SOFTWARE <span style=color:#f92672>=</span> /bin/rpm, /usr/bin/up2date, /usr/bin/yum</code></pre></div>Terakhir <em>assign</em> tugas dari software ke softwareadmins<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>SOFTWAREADMINS ALL<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span> SOFTWARE</code></pre></div>Sebagai contoh sebuah skenario ketika ingin mendeploy sebuah webserver<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Host_Alias    WEBSERVERS <span style=color:#f92672>=</span> webserver1, webserver2
User_Alias    WEBADMINS <span style=color:#f92672>=</span> userA, userB
Cmnd_Alias    WEBCOMMANDS <span style=color:#f92672>=</span> /usr/bin/systemctl status httpd, /usr/bin/systemctl start httpd, /usr/bin/systemctl stop httpd, /usr/bin/systemctl restart httpd

WEBADMINS    WEBSERVERS<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span> WEBCOMMANDS</code></pre></div></p><h3 id=membatasi-password-sudo>Membatasi Password Sudo</h3><p>Secara default ketika mengerjakan perintah sudo pertama kalinya akan diminta untuk memasukkan password dan sebelum 5 menit ketika menjalankan perintah sudo lainnya (kedua, ketiga) kita tidak akan diminta memasukkan password. Fitur ini bisa di-disable dengan menambahkan baris berikut.<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo visudo
...
Defaults     timestamp_timeout <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
...</code></pre></div>Jika hanya user tertentu yang ingin untuk memasukkan password setiap kali melakukan perintah sudo<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>...
Defaults:userA     timestamp_timeout <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
...</code></pre></div></p><h3 id=mencegah-shell-escape>Mencegah Shell Escape</h3><p>Shell Escape memungkinkan user melakukan perintah sudo dari dalam perintah lainnya. Aplikasi yang mendukung shell escape ini antara lain <strong>vim, emacs, less, view, more</strong> dan lainnya. Untuk menghindari hal tersebut bisa pada policy file bisa menggunakan <code>sudoedit</code>
Berikut contoh ketika userA hanya bisa mengedit file sshd_config<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>userA     ALL<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span>     sudoedit /etc/ssh/sshd_config</code></pre></div></p><h3 id=membatasi-perintah-sudo-user>Membatasi Perintah Sudo User</h3><p>Terkadang kita hanya ingin memberikan user tertentu dengan perintah tertentu. Misalnya userB hanya bisa bekerja dengan servis sshd, jika hanya diberikan perintah systemctl maka userB tersebut dapat pula melakukan reboot server. Oleh karena itu perintah nya harus bisa lebih spesifik.<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>userB     ALL<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span> /usr/bin/systemctl * sshd</code></pre></div>atau lebih spesifik lagi<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>userB     ALL<span style=color:#f92672>=(</span>ALL<span style=color:#f92672>)</span> /usr/bin/systemctl status sshd, /usr/bin/systemctl restart sshd</code></pre></div></p><h3 id=mengunci-direktori-home-user-redhat-based>Mengunci Direktori Home User - RedHat based</h3><p>Ketika membuat user, secara otomatis centos akan membuat direktori home dengan permission 700. Hal ini bisa dicek pada file <code>/etc/login.defs</code> dan perhatikan baris berikut<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>...
CREATE_HOME     yes
UMASK <span style=color:#ae81ff>077</span>
...</code></pre></div>UMASK 077 akan menghasilkan permission 700 dimana user lain tidak dapat melihat hingga mengeksekusi file-file yang berada di dalam direktori home user masing-masing.</p><h3 id=mengunci-direktori-home-user-debian-based>Mengunci Direktori Home User - Debian based</h3><p>Secara default ketika menambahkan user pada debian based, tidak akan membuat secara langsung direktori home user tersebut. Jika ingin membuat user seperti pada centos-based bisa dengan perintah berikut<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo useradd -m -d /home/userC -s /bin/bash userC</code></pre></div>Akan tetapi ketika melihat permission dari direktori tersebut hasilnya adalah <strong>755ecryptfs-utils</strong>.<br>Hal ini bisa diubah dengan cara edit file <code>/etc/login.defs</code> dan ubah nilai dari <strong>UMASK 022</strong> menjadi <strong>UMASK 077</strong> seperti pada centos-based.</p><h3 id=fitur-adduser-debian-based>Fitur Adduser - Debian based</h3><p>Kelebihan adduser dari useradd adalah adduser dapat langsung mengenkripsi direktori home.<br>Install terlebih dahulu paket ecryptfs-utils.<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo apt install ecryptfs-utils</code></pre></div>Kemudian buat user dengan parameter encrypt<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo adduser --encrypt-home userD</code></pre></div>Ketika login pertama kali sebagai <strong>userD</strong>, jalankan perintah<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ecryptfs-unwrap-passphrase</code></pre></div>Passphrase akan dibuat dan disimpan pada tempat yang aman</p><h3 id=enforcing-password-policy>Enforcing Password Policy</h3><p><strong>Pwquality</strong> adalah modul dari PAM (Pluggable Authentication Module) teknologi terbaru dari modul <strong>cracklib</strong>. Edit file konfigurasi di <code>/etc/security/pwquality.conf</code><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>...
minlen <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>
...
minclass <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
...
maxclassrepeat <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span></code></pre></div></p><ul><li>minlen = minimum karakter dari password<br></li><li>minclass = multiple character (jenis karakter)</li></ul><h3 id=mengatur-masa-aktif-akun>Mengatur masa aktif Akun</h3><p>mengatur masa aktif akun bisa dengan perintah <strong>chage</strong><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo chage -E <span style=color:#ae81ff>2021</span>-02-28 -I <span style=color:#ae81ff>4</span> -m <span style=color:#ae81ff>3</span> -M <span style=color:#ae81ff>90</span> -W <span style=color:#ae81ff>4</span> userA

$ sudo chage -l userA
Last password change : Oct <span style=color:#ae81ff>06</span>, <span style=color:#ae81ff>2017</span>
Password expires : Jan <span style=color:#ae81ff>04</span>, <span style=color:#ae81ff>2018</span>
Password inactive : Jan <span style=color:#ae81ff>08</span>, <span style=color:#ae81ff>2018</span>
Account expires : Feb <span style=color:#ae81ff>28</span>, <span style=color:#ae81ff>2021</span>
Minimum number of days between password change : <span style=color:#ae81ff>3</span>
Maximum number of days between password change : <span style=color:#ae81ff>90</span>
Number of days of warning before password expires : <span style=color:#ae81ff>4</span></code></pre></div></p><h3 id=mengunci-akun>Mengunci Akun</h3><p>Mengunci akun bisa dengan dua cara yaitu:</p><ul><li>usermod<br></li><li>passwd<br></li></ul><p>Untuk mengunci akun dengan <strong>usermod</strong> bisa dengan perintah berikut<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo usermod -L userB</code></pre></div>Membuka kunci (unlock) akun<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo usermod -U userB</code></pre></div>Menggunakan <strong>passwd</strong> untuk mengunci akun<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo passwd -l userB</code></pre></div>Membuka kunci dari akun userB<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo passwd -u userB</code></pre></div></p><h3 id=menghapus-user-dan-group>Menghapus user dan group</h3><p>Menghapus user dapat menggunakan perintah<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo userdel userB</code></pre></div>Jika ingin menghapus secara keseluruhan (-r) dan dengan paksa (-f)<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo userdel -r -f userB</code></pre></div>Untuk menghapus group dapat menggunakan perintah<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo groupdel -f groupA</code></pre></div></p><h3 id=menghapus-user-dari-group>Menghapus user dari Group</h3><p>Mengeluarkan user dari salah satu group. Sebagai contoh menghapus <code>userA</code> dari <code>GroupA</code><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo deluser userA groupA</code></pre></div></p></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>MFR</span></p><p class=copyright-item><span>Share:</span>
<span><a href="//twitter.com/share?url=https%3a%2f%2fmfachrulrazy.github.io%2f2017%2fuser-linux%2f&amp;text=Mengelola%20User%20pada%20Linux&amp;via=muhfachrulrazy" target=_blank title="Share on Twitter"><i class="iconfont icon-twitter"></i></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fmfachrulrazy.github.io%2f2017%2fuser-linux%2f" target=_blank title="Share on Facebook"><i class="iconfont icon-facebook"></i></a><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fmfachrulrazy.github.io%2f2017%2fuser-linux%2f&amp;title=Mengelola%20User%20pada%20Linux" target=_blank title="Share on LinkedIn"><i class="iconfont icon-linkedin"></i></a></span></p></div><div class=post-tags><section><i class="iconfont icon-icon-tag"></i>Tag:
<span class=tag><a href=https://mfachrulrazy.github.io/tags/linux/>#linux</a></span>
<span class=tag><a href=https://mfachrulrazy.github.io/tags/server/>#server</a></span></section><section><a href=javascript:window.history.back();>Back</a></span> ·
<span><a href=https://mfachrulrazy.github.io/>Home</a></span></section></div><div class=post-nav><a href=https://mfachrulrazy.github.io/2016/del-notif-chrome/ class=prev rel=prev title="Menghapus Notifikasi Pop-Up Lidgrain pada Chrome"><i class="iconfont icon-dajiantou"></i>&nbsp;Menghapus Notifikasi Pop-Up Lidgrain pada Chrome</a>
<a href=https://mfachrulrazy.github.io/2017/firewall-cmd/ class=next rel=next title="Firewall CMD Centos">Firewall CMD Centos&nbsp;<i class="iconfont icon-xiaojiantou"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2015 - 2019</span>
<span class=author itemprop=copyrightHolder><a href=https://mfachrulrazy.github.io/>MFR</a> |</span>
<span>Crafted with ❤️ by Us</span></div></footer><script src=/js/vendor_no_gallery.min.js async></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-148178248-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>